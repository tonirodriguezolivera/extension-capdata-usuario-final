<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>CapData Suite - Test de Estructura</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 20px; background-color: #f0f2f5; color: #333; line-height: 1.4; }
        .container { max-width: 1100px; margin: auto; }
        .test-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-top: 8px solid #0672ff; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .section { border: 1px solid #e0e0e0; padding: 12px; border-radius: 6px; background: #fafafa; }
        .controls { margin-bottom: 20px; display: flex; gap: 10px; justify-content: center; position: sticky; top: 0; z-index: 100; background: #f0f2f5; padding: 10px; }
        button { padding: 10px 18px; cursor: pointer; border: none; border-radius: 6px; font-weight: bold; transition: 0.3s; }
        .btn-n1 { background: #2ecc71; color: white; }
        .btn-n2 { background: #f39c12; color: white; }
        .btn-n3 { background: #e74c3c; color: white; }
        .status-badge { float: right; padding: 4px 12px; border-radius: 20px; font-size: 0.8em; font-weight: bold; }
        .tc_yellow { color: #d4a017; font-weight: 800; }
        .fw_800 { font-weight: 800; }
        .wrapper_currency { display: inline-block; }
    </style>
</head>
<body>

<div class="container">
    <div class="controls">
        <button class="btn-n1" onclick="setScenario(1)">Nivel 1: Original</button>
        <button class="btn-n2" onclick="setScenario(2)">Nivel 2: P dentro de DIV</button>
        <button class="btn-n3" onclick="setScenario(3)">Nivel 3: P cambiado a SPAN</button>
        <button class="btn-n4" onclick="setScenario(4)">4: Formulario (RELLENADO)</button>
    </div>

    <div class="test-card">
        <span id="scenario-badge" class="status-badge"></span>
        <h2 id="scenario-name">Seleccione Escenario</h2>
        <div id="render-area"></div>
    </div>
</div>

<script>
    function setScenario(n) {
        const area = document.getElementById('render-area');
        const badge = document.getElementById('scenario-badge');
        const name = document.getElementById('scenario-name');

        // --- ESCENARIO 1 (ORIGINAL) ---
        if (n === 1) {
            name.innerText = "Estructura Original";
            badge.innerText = "BASE"; badge.style.background = "#d1e7dd";
            area.innerHTML = `
                <div id="agencias_flyedArticle" class="section">
                    <h1 class="num_pasajeros">2 Pasajeros</h1>
                    <p class="fs_14">Fecha Emisión: 10/11/2023</p>
                    <div class="sectionBorderTab">
                        <h3 class="header">Localizador: <span class="infoRight"><span class="tc_yellow">LOC111AA</span></span></h3>
                    </div>
                </div>

                <div class="grid">
                    <div id="journeyId_0" class="section">
                        <h6 class="fw_800"><i class="icoRoundFee">Ida: 15/12/2023 | IB101</i></h6>
                        <table><tr><td class="detalleHoraSinAncho">09:00 - 10:30</td><td class="detalleRuta">MAD-BCN</td></tr></table>
                    </div>
                    <div id="journeyId_1" class="section">
                        <h6 class="fw_800"><i class="icoRoundFee">Vuelta: 20/12/2023 | IB102</i></h6>
                        <table><tr><td class="detalleHoraSinAncho">18:00 - 19:30</td><td class="detalleRuta">BCN-MAD</td></tr></table>
                    </div>
                </div>

                <div id="paxDetailTotal" class="section">
                    <i class="icoRoundFee">
                        <span class="fw_800">Total: <span class="wrapper_currency">350.50 <sup><span>EUR</span></sup></span></span>
                    </i>
                    <div class="paxPaymentRow"><span class="column_4">Tasas: 45.00</span></div>
                </div>

                <div id="paymentDetails" class="section">
                    <div id="passenger-list-container">
                        <div class="pax-item-row">Juan Perez</div>
                        <div class="pax-item-row">Maria Garcia</div>
                        <div class="pax-item-row">Pedro Marmol</div>
                    </div>
                    <div class="paxPaymentRow"><i class="icoRoundFee"><span class="column_7">VISA 4455</span></i></div>
                    <div class="paxPaymentRow"><span class="column_8">Residente: SI</span></div>
                </div>

                <footer id="footer" class="section">
                    <div class="footer_main"><ul><li>Iberia | Proveedor: Amadeus</li></ul></div>
                </footer>
            `;
        }

        // --- ESCENARIO 2 (IGUAL AL 1 PERO CON P DENTRO DE DIV) ---
        else if (n === 2) {
            name.innerText = "Misma estructura + Envoltorios DIV";
            badge.innerText = "DIV WRAPPER"; badge.style.background = "#fff3cd";
            area.innerHTML = `
                <div id="agencias_flyedArticle" class="section">
                    <h1 class="num_pasajeros">2 Pasajeros</h1>
                    <!-- Metemos el P dentro de un DIV -->
                    <div>
                        <p class="fs_14">Fecha Emisión: 10/11/2023</p>
                    </div>
                    <div class="sectionBorderTab">
                        <h3 class="header">Localizador: <span class="infoRight"><span class="tc_yellow">LOC222AA</span></span></h3>
                    </div>
                </div>

                <div class="grid">
                    <div id="journeyId_0" class="section">
                        <!-- Metemos el h6 dentro de un div -->
                        <div>
                            <h6 class="fw_800"><i class="icoRoundFee">Ida: 15/12/2023 | IB101</i></h6>
                        </div>
                        <table><tr><td class="detalleHoraSinAncho">09:00 - 10:30</td><td class="detalleRuta">MAD-BCN</td></tr></table>
                    </div>
                    <div id="journeyId_1" class="section">
                        <div>
                            <h6 class="fw_800"><i class="icoRoundFee">Vuelta: 20/12/2023 | IB102</i></h6>
                        </div>
                        <table><tr><td class="detalleHoraSinAncho">18:00 - 19:30</td><td class="detalleRuta">BCN-MAD</td></tr></table>
                    </div>
                </div>

                <div id="paxDetailTotal" class="section">
                    <div>
                        <i class="icoRoundFee">
                            <span class="fw_800">Total: <span class="wrapper_currency">350.50 <sup><div>EUR</div></sup></span></span>
                        </i>
                    </div>
                    <div class="paxPaymentRow"><div><span class="column_4">Tasas: 45.00</span></div></div>
                </div>

                <div id="paymentDetails" class="section">
                    <div><div id="ItineraryPassengerSeatDetailsDisplay">Juan Perez, Maria Garcia</div></div>
                    <div class="paxPaymentRow"><div><i class="icoRoundFee"><span class="column_7">VISA 4455</span></i></div></div>
                    <div class="paxPaymentRow"><div><span class="column_8">Residente: SI</span></div></div>
                </div>

                <footer id="footer" class="section">
                    <div><div class="footer_main"><ul><li>Iberia | Proveedor: Amadeus</li></ul></div></div>
                </footer>
            `;
        }

        // --- ESCENARIO 3 (IGUAL AL 1 PERO P CAMBIADO POR SPAN) ---
        else if (n === 3) {
            name.innerText = "Misma estructura + Cambio de Tags (P a SPAN)";
            badge.innerText = "TAG SWAP"; badge.style.background = "#f8d7da";
            area.innerHTML = `
                <div id="agencias_flyedArticle" class="section">
                    <!-- H1 cambiado por DIV -->
                    <div class="num_pasajeros" style="font-size:2em; font-weight:bold;">2 Pasajeros</div>
                    <!-- P cambiado por SPAN -->
                    <span class="fs_14" style="display:block">Fecha Emisión: 10/11/2023</span>
                    <div class="sectionBorderTab">
                        <div class="header" style="font-weight:bold">Localizador: <span class="infoRight"><span class="tc_yellow">LOC333AA</span></span></div>
                    </div>
                </div>

                <div class="grid">
                    <div id="journeyId_0" class="section">
                        <span class="fw_800" style="display:block"><i class="icoRoundFee">Ida: 15/12/2023 | IB101</i></span>
                        <table><tr><td class="detalleHoraSinAncho">09:00 - 10:30</td><td class="detalleRuta">MAD-BCN</td></tr></table>
                    </div>
                    <div id="journeyId_1" class="section">
                        <span class="fw_800" style="display:block"><i class="icoRoundFee">Vuelta: 20/12/2023 | IB102</i></span>
                        <table><tr><td class="detalleHoraSinAncho">18:00 - 19:30</td><td class="detalleRuta">BCN-MAD</td></tr></table>
                    </div>
                </div>

                <div id="paxDetailTotal" class="section">
                    <i class="icoRoundFee">
                        <span class="fw_800">Total: <span class="wrapper_currency">350.50 <sup><span class="currency">EUR</span></sup></span></span>
                    </i>
                    <div class="paxPaymentRow"><span class="column_4">Tasas: 45.00</span></div>
                </div>

                <div id="paymentDetails" class="section">
                    <!-- Div en lugar de P o similar -->
                    <div id="ItineraryPassengerSeatDetailsDisplay">Juan Perez, Maria Garcia</div>
                    <div class="paxPaymentRow"><i class="icoRoundFee"><span class="column_7">VISA 4455</span></i></div>
                    <div class="paxPaymentRow"><span class="column_8">Residente: SI</span></div>
                </div>

                <footer id="footer" class="section">
                    <div class="footer_main"><span>Iberia | Proveedor: Amadeus</span></div>
                </footer>
            `;
        }
         else if (n === 4) {
            name.innerText = "Formulario de Pasajeros (Autofill)";
            badge.innerText = "RELLENADO"; badge.style.background = "#0672ff"; badge.style.color = "white";
            area.innerHTML = `
                <div class="section" id="form-pasajero-test">
                    <div style="margin-bottom: 20px; padding: 10px; background: #eef6ff; border-left: 4px solid #0672ff; font-size: 0.9em;">
                        <strong>Prueba de Autorellenado:</strong> Selecciona un contacto en tu extensión y dale a "Rellenar".
                    </div>
                    
                    <form id="registro-pax">
                        <div class="grid">
                            <div class="form-group">
                                <label>Nombre del Pasajero:</label>
                                <input type="text" id="nombre_pax" name="firstname" placeholder="Ej: Juan">
                            </div>
                            <div class="form-group">
                                <label>Apellidos:</label>
                                <input type="text" id="primer_apellidos_pax" name="lastname" placeholder="Ej: Pérez García">
                            </div>
                        </div>

                        <div class="grid">
                            <div class="form-group">
                                <label>Número de Documento (DNI/NIE/Pasaporte):</label>
                                <input type="text" id="num_documento" name="doc_id" placeholder="12345678Z">
                            </div>
                            <div class="form-group">
                                <label>Fecha de Nacimiento:</label>
                                <input type="date" id="fecha_nac" name="birthday">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Correo Electrónico:</label>
                            <input type="text" id="email_pax" name="email" placeholder="usuario@ejemplo.com">
                        </div>

                        <button type="button" style="background: #2ecc71; color: white; width: 100%; margin-top: 10px;" onclick="alert('Formulario enviado (simulación)')">
                            Confirmar Datos del Pasajero
                        </button>
                    </form>
                </div>
            `;
        }
    }

    // Iniciar con el primero
    window.onload = () => setScenario(1);
</script>

</body>
</html>